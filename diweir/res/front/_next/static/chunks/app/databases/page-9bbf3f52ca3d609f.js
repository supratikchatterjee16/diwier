(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{1965:function(e,n,t){Promise.resolve().then(t.bind(t,5966))},8510:function(e,n,t){"use strict";t.d(n,{default:function(){return x}});var o=t(7437),i=t(8247),s=t(1655),d=t(4614),c=t(7398),l=t(7193),a=t(9450),r=t(983),m=t(9710),u=t(3891),h=t(393),p=t(1810);function x(e){let{select:n}=e,t=[{action:"tasks",component:c.Z},{action:"design",component:l.Z},{action:"analyze",component:a.Z},{action:"anonymize",component:r.Z},{action:"archive",component:u.Z},{action:"purge",component:m.Z},{action:"dashboard",component:h.Z},{action:"databases",component:p.Z}];return t.forEach(e=>{e.action===n&&(e.select=!0)}),(0,o.jsx)(i.Z,{position:"static",color:"transparent",children:(0,o.jsx)("div",{children:t.map((e,n)=>(0,o.jsx)(s.Z,{title:e.action.charAt(0).toUpperCase()+e.action.slice(1),children:(0,o.jsx)(d.Z,{size:"large",onClick:()=>window.location.replace("/"+e.action),children:e.select?(0,o.jsx)(e.component,{sx:{color:"#ed6c02"}}):(0,o.jsx)(e.component,{})})},n+1))})})}},5966:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return q}});var o=t(7437),i=t(2265),s=t(2197),d=t(8510),c=t(2033),l=t(6548),a=t(4204),r=t(1847),m=t(3578),u=t(7999),h=t(224),p=t(2960),x=t(2804),j=t(1096),f=t(824),Z=t(385),g=t(3983),v=t(8784);function w(e){let{open:n,closeAction:t,addAction:i}=e,s=(0,p.Z)(),d=(0,x.Z)(s.breakpoints.down("md"));return(0,o.jsxs)(j.Z,{fullscreen:d,open:n,onClose:t,children:[(0,o.jsx)(f.Z,{children:"Add Environment"}),(0,o.jsx)(Z.Z,{children:(0,o.jsxs)(u.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{id:"env-name",label:"Name"})}),(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{id:"env-desc",label:"Description",multiline:!0,maxRows:4})})]})}),(0,o.jsxs)(v.Z,{children:[(0,o.jsx)(l.Z,{onClick:i,autoFocus:!0,children:"Create"}),(0,o.jsx)(l.Z,{onClick:t,children:"Cancel"})]})]})}function C(e){let{open:n,closeAction:t,addAction:i,environments:s}=e,d=(0,p.Z)(),c=(0,x.Z)(d.breakpoints.down("md"));return(0,o.jsxs)(j.Z,{fullscreen:c,open:n,onClose:t,children:[(0,o.jsx)(f.Z,{children:"Add Connection"}),(0,o.jsx)(Z.Z,{children:(0,o.jsxs)(u.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{id:"conn-name",label:"Name"})}),(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{id:"conn-desc",label:"Description",multiline:!0,maxRows:4})})]})}),(0,o.jsxs)(v.Z,{children:[(0,o.jsx)(l.Z,{onClick:i,autoFocus:!0,children:"Create"}),(0,o.jsx)(l.Z,{onClick:t,children:"Cancel"})]})]})}function k(e){let{open:n,closeAction:t,addAction:i,environments:s}=e,d=(0,p.Z)(),c=(0,x.Z)(d.breakpoints.down("md"));return(0,o.jsxs)(j.Z,{fullscreen:c,open:n,onClose:t,children:[(0,o.jsx)(f.Z,{children:"Add Connection"}),(0,o.jsx)(Z.Z,{children:(0,o.jsxs)(u.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{id:"conn-name",label:"Name"})}),(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{id:"conn-desc",label:"Description",multiline:!0,maxRows:4})})]})}),(0,o.jsxs)(v.Z,{children:[(0,o.jsx)(l.Z,{onClick:i,autoFocus:!0,children:"Create"}),(0,o.jsx)(l.Z,{onClick:t,children:"Cancel"})]})]})}var y=t(8472);let E="/api/envs",A=y.Z.create({headers:{"Content-Type":"application/json"},timeout:1e4});A.interceptors.request.use(e=>e,e=>Promise.reject(e)),A.interceptors.response.use(e=>e,e=>(e.response?console.error("API Error:",e.response.data):e.request?console.error("Network Error:",e.request):console.error("Error:",e.message),Promise.reject(e)));let b=()=>{A.defaults.baseURL=window.location.origin},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A.get(E,{params:e,...n})},S=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A.post(E,e,n)},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A.delete(E,e)};function I(e){let{onEnvChange:n,controls:t=!0}=e,[s,d]=(0,i.useState)(!1),[p,x]=(0,i.useState)([]),[j,f]=(0,i.useState)(!0),[Z,g]=(0,i.useState)([]),v={fetch:async()=>{let e=await P(),n=0;g(e.data.map(e=>({...e,id:n++})))},add:async()=>{let e=await S({name:document.getElementById("env-name").value,desc:document.getElementById("env-desc").value});200==e.status&&(g(n=>[...n,{...e.data,id:n[n.length-1].id+1}]),v.closeAddPrompt())},delete:async()=>{let e=p.map(e=>({name:Z[e].name,desc:Z[e].desc}));200==(await N({data:e})).status&&(v.fetch(),f(!0))},select:e=>{e.length>0?f(!1):f(!0),x(e)},openAddPrompt:()=>{d(!0)},closeAddPrompt:()=>{d(!1)}};(0,i.useEffect)(()=>{b(),v.fetch(),n(Z)},[n]);let C=(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(l.Z,{onClick:v.openAddPrompt,children:"Add"}),(0,o.jsx)(l.Z,{onClick:v.delete,disabled:j,children:"Delete"})]}),k=(0,o.jsx)(w,{open:s,closeAction:v.closeAddPrompt,addAction:v.add});return t||(C=null,k=null),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,{children:[(0,o.jsx)(r.Z,{children:"Environments"}),(0,o.jsx)(m.Z,{children:(0,o.jsx)(u.Z,{sx:{height:400,width:"100%"},children:(0,o.jsx)(h._,{rows:Z,columns:[{field:"name",headerName:"Name",width:200},{field:"desc",headerName:"Description",width:500}],initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[5,10],checkboxSelection:!0,onRowSelectionModelChange:v.select})})}),C]}),k]})}let M="/api/database",F=y.Z.create({headers:{"Content-Type":"application/json"},timeout:1e4});F.interceptors.request.use(e=>e,e=>Promise.reject(e)),F.interceptors.response.use(e=>e,e=>(e.response?console.error("API Error:",e.response.data):e.request?console.error("Network Error:",e.request):console.error("Error:",e.message),Promise.reject(e)));let _=()=>{F.defaults.baseURL=window.location.origin},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F.get(M,{params:e,...n})},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.delete(M,e)};function z(e){let{envs:n,controls:t=!0}=e,[s,d]=(0,i.useState)(!1),[p,x]=(0,i.useState)(!1),[j,f]=(0,i.useState)([]),[Z,g]=(0,i.useState)(!0),[v,w]=(0,i.useState)(!0),[y,E]=(0,i.useState)([]),A={fetch:async()=>{let e=await B();console.log(e);let n=0;setConRows(e.data.map(e=>({...e,id:n++})))},add:async()=>{let e=await envService.post({name:document.getElementById("conn-name").value,env_name:document.getElementById("conn-env-name").value,provider:document.getElementById("conn-provider").value,ip:document.getElementById("conn-ip").value,schema:document.getElementById("conn-schema").value,user:document.getElementById("conn-user").value,psk:document.getElementById("conn-psk").value});200==e.status&&(E(n=>[...n,{...e.data,id:n[n.length-1].id+1}]),envActions.closeAddPrompt())},update:async()=>{},delete:async()=>{let e=j.map(e=>({name:y[e].name,desc:y[e].desc}));200==(await R({data:e})).status&&(A.fetch(),g(!0))},select:e=>{e.length>0?(g(!1),1==e.length?w(!1):w(!0)):(g(!0),w(!0)),f(e)},openAddPrompt:()=>{d(!0)},closeAddPrompt:()=>{d(!1)},openModifyPrompt:()=>{x(!0)},closeModifyPrompt:()=>{x(!1)}};(0,i.useEffect)(()=>{_(),A.fetch()});let b=(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(l.Z,{onClick:A.openAddPrompt,children:"Add"}),(0,o.jsx)(l.Z,{onClick:A.openModifyPrompt,disabled:v,children:"Modify"}),(0,o.jsx)(l.Z,{onClick:A.delete,disabled:Z,children:"Delete"})]}),P=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C,{open:s,closeAction:A.closeAddPrompt,addAction:A.add,environments:n}),(0,o.jsx)(k,{open:p,closeAction:A.closeModifyPrompt,modifyAction:A.update,environments:n})]});return t||(b=null,P=null),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,{defaultExpanded:!0,children:[(0,o.jsx)(r.Z,{children:"Connections"}),(0,o.jsx)(m.Z,{children:(0,o.jsx)(u.Z,{sx:{height:500,width:"100%"},children:(0,o.jsx)(h._,{rows:y,columns:[{field:"name",headerName:"Name",width:150},{field:"env_name",headerName:"Environment Name",width:250},{field:"provider",headerName:"Provider",width:150},{field:"ip",headerName:"IP",width:250},{field:"schema",headerName:"Schema",width:100}],initialState:{pagination:{paginationModel:{page:0,pageSize:50}}},pageSizeOptions:[5,10,50,100],checkboxSelection:!0,onRowSelectionModelChange:A.select})})}),b]}),P]})}function q(){let[e,n]=(0,i.useState)([]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.default,{select:"databases"}),(0,o.jsxs)(s.Z,{maxWidth:"xl",sx:{paddingTop:"20pt"},children:[(0,o.jsx)(I,{onEnvChange:e=>{n(e)}}),(0,o.jsx)(z,{envs:e})]})]})}}},function(e){e.O(0,[760,459,907,55,85,971,23,744],function(){return e(e.s=1965)}),_N_E=e.O()}]);